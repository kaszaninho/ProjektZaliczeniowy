<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml" 
             xmlns:local="clr-namespace:PsychoMedikApp.ViewModels.PracownikVM" 
             xmlns:model="clr-namespace:PsychoMedik.Service.Reference"
             x:Class="PsychoMedikApp.Views.PracownikView.PracownikDetailsPage"
             Title="Szczegóły Pracownika">
    <ContentPage.Content>
        <StackLayout Spacing="3" Padding="15">
            <Label Text="Szczegóły Pracownika" FontSize="Medium" FontAttributes="Bold"
                   HorizontalOptions="Center" VerticalOptions="Center"/>
            <Image Source="doctor.png" WidthRequest="60" HeightRequest="25"></Image>
            <Label Text="Nazwa" FontSize="18" FontAttributes="Bold" />
            <Label Text="{Binding Imie}" Style="{StaticResource BlueLabelStyle}" FontSize="16" />
            <Label Text="Opis" FontSize="18" FontAttributes="Bold" />
            <Label Text="{Binding Nazwisko}" Style="{StaticResource BlueLabelStyle}" FontSize="16" />
            <Label Text="Data urodzenia" FontSize="18" FontAttributes="Bold" />
            <Label Text="{Binding DataUrodzenia}" Style="{StaticResource BlueLabelStyle}" FontSize="16" />
            <Label Text="Data zatrudnienia" FontSize="18" FontAttributes="Bold" />
            <Label Text="{Binding DataZatrudnienia}" Style="{StaticResource BlueLabelStyle}" FontSize="16" />
            <Label Text="Data rezygnacji" FontSize="18" FontAttributes="Bold" />
            <Label Text="{Binding DataModyfikacji}" Style="{StaticResource BlueLabelStyle}" FontSize="16" />
            <Label Text="Stan cywilny" FontSize="18" FontAttributes="Bold" />
            <Label Text="{Binding StanCywilny}" Style="{StaticResource BlueLabelStyle}" FontSize="16" />
            <Label Text="Płeć" FontSize="18" FontAttributes="Bold" />
            <Label Text="{Binding Plec}" Style="{StaticResource BlueLabelStyle}" FontSize="16" />
            <Label Text="Stanowisko" FontSize="18" FontAttributes="Bold" />
            <Label Text="{Binding NazwaStanowisko}" Style="{StaticResource BlueLabelStyle}" FontSize="16" />
            <Label Text="Data utworzenia" FontSize="18" FontAttributes="Bold" />
            <Label Text="{Binding DataUtworzenia}" Style="{StaticResource BlueLabelStyle}" FontSize="16" />
            <Label Text="Data modyfikacji" FontSize="18" FontAttributes="Bold" />
            <Label Text="{Binding DataModyfikacji}" Style="{StaticResource BlueLabelStyle}" FontSize="16" />
            <RefreshView x:DataType="local:PracownikDetailsViewModel" Command="{Binding LoadItemsCommand}" IsRefreshing="{Binding IsBusy, Mode=TwoWay}">
                <CollectionView x:Name="PacjenciListView"
                                ItemsSource="{Binding Wizyty}"
                                SelectionMode="None">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <StackLayout Padding="10" x:DataType="model:WizytaForView">
                                <Label Text="{Binding Id}" 
                                    LineBreakMode="NoWrap" 
                                    Style="{DynamicResource ListItemTextStyle}"
                                    FontSize="12" />
                                <Label Text="{Binding ImieNazwiskoPacjenta}" 
                                    LineBreakMode="NoWrap" 
                                    Style="{DynamicResource ListItemTextStyle}" 
                                    FontSize="16" />
                                <Label Text="{Binding DataWizyty}" 
                                    LineBreakMode="NoWrap" 
                                    Style="{DynamicResource ListItemTextStyle}" 
                                    FontSize="16" />
                                <StackLayout.GestureRecognizers>
                                    <TapGestureRecognizer
                                NumberOfTapsRequired="1"
                                Command="{Binding Source={RelativeSource AncestorType={x:Type local:PracownikDetailsViewModel}}, Path=ItemTapped}"
                                CommandParameter="{Binding .}">
                                    </TapGestureRecognizer>
                                </StackLayout.GestureRecognizers>
                            </StackLayout>                            
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
                                
            </RefreshView>
            <StackLayout Orientation="Horizontal">
                <Button Text="Anuluj" Command="{Binding CancelCommand}" Style="{StaticResource YesButton}" HorizontalOptions="FillAndExpand" />
                <Button Text="Usuń" Command="{Binding DeleteCommand}" Style="{StaticResource RedButton}" HorizontalOptions="FillAndExpand" />
                <Button Text="Dodaj wizytę" Command="{Binding AddWizytaCommand}" Style="{StaticResource YesButton}" HorizontalOptions="FillAndExpand" />
            </StackLayout>
        </StackLayout>
    </ContentPage.Content>
</ContentPage>